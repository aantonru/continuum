{"ast":null,"code":"var _jsxFileName = \"/Users/Shared/www/continuum/continuum/src/components/Core.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { photosSearch, photosClear } from './actions/photos';\nimport { store } from '../index';\nimport './Core.css';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport Lightbox from 'react-image-lightbox';\nimport 'react-image-lightbox/style.css';\nimport GoogleMapGeoPicker from 'react-geo-picker/lib/google-map';\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport MyAuth from './MyAuth';\nimport { waitForElement } from '@testing-library/react'; //import * as nsfwjs from 'nsfwjs'\n//import VK, { Auth } from \"react-vk\";\n//import { reduxForm, Field } from 'redux-form';\n//import LocationPicker from 'react-location-picker';\n//import MapboxGeoPicker from 'react-geo-picker/lib/mapbox';\n//import createGoogleMapGeoPicker from 'react-geo-picker/lib/forms/redux-form/createGoogleMapGeoPicker';\n//import MapboxGeoPicker from 'react-geo-picker/lib/mapbox';\n//const GoogleMapGeoPicker = createGoogleMapGeoPicker({ formName });\n\nconst googleMapApiKey = 'AIzaSyAfcp4NLIW115eDyTYeEMpPIEQBI4RXrgs';\nconst defaultPosition = {\n  latitude: 51.625712,\n  longitude: 39.080306\n};\n\nclass GetPhotos extends Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n\n    this._loadModel = () => {// Load model from public folder\n      //   nsfwjs.load('/model/', {size:299}).then(model => {\n      //   this.setState({\n      //   model,\n      //  })\n      // })\n    };\n\n    this.getPredictions = async (id, url, width, height) => {\n      //       let r='img_'+id;\n      //       let myImg=this.refs.r;\n      const img = new Image();\n      img.width = width;\n      img.height = height;\n      img.crossOrigin = 'anonymous';\n      img.src = url;\n      await this.sleep(100);\n      const predictions = await this.state.model.classify(img);\n      console.log('^^^^pred^^^^^');\n      console.log('id: ', id, '  url', img.src);\n      console.log(predictions);\n      let newone = this.state.predictions;\n      newone[id] = predictions;\n      this.setState({\n        predictions: newone,\n        busy: false\n      });\n    };\n\n    this.onLocationChange = location => this.setState({\n      location: { ...this.state.location,\n        ...location\n      }\n    });\n\n    this.handleLatitudeChange = event => this.onLocationChange({\n      latitude: Number(event.target.value)\n    });\n\n    this.handleLongitudeChange = event => this.onLocationChange({\n      longitude: Number(event.target.value)\n    });\n\n    this.state = {\n      showForm: true,\n      photoIndex: 0,\n      photos: [],\n      offset: 0,\n      isOpen: false,\n      startDate: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\n      endDate: new Date(),\n      location: defaultPosition,\n      radius: 800,\n      advancedOptions: false,\n      searchPanel: true,\n      photosFound: 0,\n      predictions: [],\n      model: null,\n      busy: false,\n      photosIsLoading: false,\n      photosHasError: false\n    };\n    this.handleRadiusChange = this.handleRadiusChange.bind(this);\n  }\n\n  componentDidMount() {//  this._loadModel()\n  }\n\n  sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  checkContent() {\n    return;\n    let i = 0;\n    let item = this.props.photos[i];\n\n    while (item && this.state.predictions[item.id] && !this.state.busy) {\n      i++;\n      item = this.props.photos[i];\n    }\n\n    console.log(i);\n    console.log(item);\n    if (item) console.log(this.state.predictions[item.id]);\n    console.log(this.state.busy);\n    console.log(this.props.photos);\n\n    if (item && !this.state.predictions[item.id] && !this.state.busy) {\n      this.setState({\n        busy: true\n      });\n      console.log('got busy');\n      let size = 3;\n      this.getPredictions(item.id, item.sizes[size].url, item.sizes[size].width, item.sizes[size].height);\n    }\n  }\n\n  componentDidUpdate() {\n    if (!this.state.busy) {\n      this.checkContent();\n    }\n  }\n\n  handleChangeStartDate(date) {\n    this.setState({\n      startDate: date\n    });\n  }\n\n  handleChangeEndDate(date) {\n    this.setState({\n      endDate: date\n    });\n  }\n\n  handleRadiusChange(event) {\n    this.setState({\n      radius: Number(event.target.value)\n    });\n  }\n\n  setRadius(r) {\n    this.setState({\n      radius: r\n    });\n  }\n\n  setDate(date) {\n    this.setState({\n      startDate: date\n    });\n    let now = new Date();\n    this.setState({\n      endDate: now\n    });\n  }\n\n  combineParams() {\n    let params = {};\n\n    if (document.querySelector('#radius') && document.querySelector('#radius').value) {\n      params.radius = document.querySelector('#radius').value;\n    }\n\n    params.start_time = Math.floor(this.state.startDate.getTime() / 1000);\n    params.end_time = Math.floor(this.state.endDate.getTime() / 1000);\n    params.lat = this.state.location.latitude;\n    params.long = this.state.location.longitude;\n    params.radius = this.state.radius;\n    params.sort = 1;\n    params.count = 100;\n    params.offset = 0;\n    params.v = 5.103;\n    return params;\n  }\n\n  getData() {\n    this.setState({\n      offset: 0\n    });\n\n    if (this.state.photos && this.state.photos.length > 0) {\n      console.log('*****clear*****');\n      store.dispatch(photosClear);\n    }\n\n    let params = this.combineParams();\n    store.dispatch(photosSearch(params));\n  }\n\n  getMoreData() {\n    let params = this.combineParams();\n    this.setState({\n      offset: this.state.offset + 100\n    });\n    params.offset = this.state.offset;\n    store.dispatch(photosSearch(params));\n  }\n\n  toggleOptions() {\n    if (!this.state.searchPanel) {\n      this.toggleSearchPanel();\n    }\n\n    this.setState({\n      advancedOptions: !this.state.advancedOptions\n    });\n  }\n\n  toggleSearchPanel() {\n    this.setState({\n      searchPanel: !this.state.searchPanel\n    });\n  }\n\n  render() {\n    if (window.VK === null && window.VK === 'undefined' && !window.VK.Api) {\n      return {\n        MyAuth\n      };\n    }\n\n    if (this.state.photosIsLoading && !this.state.photosHasError) {\n      return /*#__PURE__*/React.createElement(\"p\", {\n        className: \"labelBig\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 21\n        }\n      }, \"Loading\");\n    }\n\n    if (this.state.photosHasError) {\n      return /*#__PURE__*/React.createElement(\"p\", {\n        className: \"labelBig\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 21\n        }\n      }, \"Error\");\n    }\n\n    let imagesList = '';\n\n    if (this.state.photos && this.state.photos.length > 0) {\n      imagesList = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"imgContainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"labelBig\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 17\n        }\n      }, \"Found \", this.state.photosFound, \" images\"), this.state.photos.map((item, index) => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"center-cropped\",\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 21\n        }\n      }, item.owner_id > 0 && /*#__PURE__*/React.createElement(\"a\", {\n        className: \"vkLink\",\n        href: 'https://vk.com/id' + item.owner_id,\n        target: \"blank\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 29\n        }\n      }, \"VK\"), this.state.predictions[item.id] && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"predContainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 33\n        }\n      }, this.state.predictions[item.id].map(pred => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pred\",\n        key: item.id + '_' + pred.className,\n        style: {\n          width: pred.probability * 100 + '%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 138\n        }\n      }, pred.className)))), /*#__PURE__*/React.createElement(\"img\", {\n        ref: 'img_' + item.id,\n        src: item.sizes[1].url,\n        onClick: () => this.setState({\n          isOpen: true,\n          photoIndex: index\n        }),\n        width: item.sizes[1].width,\n        height: item.sizes[1].height,\n        className: \"imgTile\",\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 25\n        }\n      }))));\n    }\n\n    const {\n      isOpen\n    } = this.state.isOpen;\n    const {\n      location\n    } = this.state;\n    const day = new Date(new Date().setHours(0, 0, 0, 0));\n    const week = new Date();\n    week.setDate(week.getDate() - 7);\n    week.setHours(0, 0, 0, 0);\n    const month = new Date(new Date().getFullYear(), new Date().getMonth(), 1);\n    const year = new Date(new Date().getFullYear(), 0, 1);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"coreApp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: this.state.photosIsLoading === true ? \"spinner\" : \"hidden\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }\n    }, \"loading..\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formInputToggle\",\n      onClick: () => this.toggleSearchPanel(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      role: \"img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 89\n      }\n    }, \"\\uD83D\\uDD0D\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 122\n      }\n    }, \"Search\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 131\n      }\n    }), \"panel\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formInputToggle\",\n      onClick: () => this.toggleOptions(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      role: \"img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 85\n      }\n    }, \"\\u2699\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 116\n      }\n    }, \"Advanced\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 127\n      }\n    }), \"options\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputPanel \" + (this.state.searchPanel ? '' : 'hidden'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formInput \" + (this.state.advancedOptions ? '' : 'hidden'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-control\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 29\n      }\n    }, \"Latitude:\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"input1\",\n      type: \"number\",\n      step: \"0.0000001\",\n      min: -90,\n      max: 90,\n      value: location.latitude,\n      onChange: this.handleLatitudeChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-control\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 29\n      }\n    }, \"Latitude:\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"input1\",\n      type: \"number\",\n      step: 0.0000001,\n      min: -180,\n      max: 180,\n      value: location.longitude,\n      onChange: this.handleLongitudeChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-control\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 29\n      }\n    }, \"Distance (m)\"), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"radius\",\n      className: \"input1\",\n      type: \"number\",\n      disabled: true,\n      placeholder: \"radius\",\n      onChange: this.handleRadiusChange,\n      value: this.state.radius,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 25\n      }\n    }, \"From date\"), /*#__PURE__*/React.createElement(DatePicker, {\n      className: \"input1\",\n      selected: this.state.startDate,\n      onChange: date => this.handleChangeStartDate(date),\n      showTimeSelect: true,\n      timeFormat: \"HH:mm\",\n      timeIntervals: 30,\n      timeCaption: \"time\",\n      dateFormat: \"MMM d, yyyy HH:mm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 25\n      }\n    }, \"To date\"), /*#__PURE__*/React.createElement(DatePicker, {\n      className: \"input1\",\n      selected: this.state.endDate,\n      onChange: date => this.handleChangeEndDate(date),\n      showTimeSelect: true,\n      timeFormat: \"HH:mm\",\n      timeIntervals: 30,\n      timeCaption: \"time\",\n      dateFormat: \"MMM d, yyyy HH:mm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formMap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(GoogleMapGeoPicker, {\n      apiKey: googleMapApiKey,\n      value: location,\n      width: \"100%\",\n      onChange: this.onLocationChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formSelect\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 25\n      }\n    }, \"Period\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"select1 \" + (this.state.startDate.getTime() === day.getTime() ? 'selected' : ''),\n      onClick: () => this.setDate(day),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 25\n      }\n    }, \"Day\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"select1 \" + (this.state.startDate.getTime() == week.getTime() ? 'selected' : ''),\n      onClick: () => this.setDate(week),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 25\n      }\n    }, \"Week\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"select1 \" + (this.state.startDate.getTime() === month.getTime() ? 'selected' : ''),\n      onClick: () => this.setDate(month),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 25\n      }\n    }, \"Month\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"select1 \" + (this.state.startDate.getTime() === year.getTime() ? 'selected' : ''),\n      onClick: () => this.setDate(year),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 25\n      }\n    }, \"Year\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 25\n      }\n    }, \"Distance\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"select1 \" + (this.state.radius === 100 ? 'selected' : ''),\n      onClick: () => this.setRadius(100),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 25\n      }\n    }, \"100 m\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"select1 \" + (this.state.radius === 800 ? 'selected' : ''),\n      onClick: () => this.setRadius(800),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 25\n      }\n    }, \"800 m\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"select1 \" + (this.state.radius === 6000 ? 'selected' : ''),\n      onClick: () => this.setRadius(6000),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 25\n      }\n    }, \"6 km\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"select1 \" + (this.state.radius === 50000 ? 'selected' : ''),\n      onClick: () => this.setRadius(50000),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 25\n      }\n    }, \"50 km\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formSelect\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"input1\",\n      onClick: () => this.getData(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 25\n      }\n    }, \"Find\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"imagesList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n      dataLength: this.state.photos.length,\n      next: () => this.getMoreData(),\n      hasMore: this.state.offset <= 900 //                    loader={<p className=\"labelBig\">Loading...</p>}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 21\n      }\n    }, imagesList), isOpen && /*#__PURE__*/React.createElement(Lightbox, {\n      imageTitle: this.state.photos[this.state.photoIndex].owner_id > 0 ? /*#__PURE__*/React.createElement(\"a\", {\n        className: \"vkLink vkLinkLightbox\",\n        href: 'https://vk.com/id' + this.state.photos[this.state.photoIndex].owner_id,\n        target: \"blank\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 97\n        }\n      }, \"VK\") : '',\n      mainSrc: this.state.photos[this.state.photoIndex].sizes[this.state.photos[this.state.photoIndex].sizes.length - 1].url,\n      nextSrc: this.state.photos[(this.state.photoIndex + 1) % this.state.photos.length].sizes[this.state.photos[(this.state.photoIndex + 1) % this.state.photos.length].sizes.length - 1].url,\n      prevSrc: this.state.photos[(this.state.photoIndex + this.state.photos.length - 1) % this.state.photos.length].sizes[this.state.photos[(this.state.photoIndex + this.state.photos.length - 1) % this.state.photos.length].sizes.length - 1].url,\n      onCloseRequest: () => this.setState({\n        isOpen: false\n      }),\n      onMovePrevRequest: () => this.setState({\n        photoIndex: (this.state.photoIndex + this.state.photos.length - 1) % this.state.photos.length\n      }),\n      onMoveNextRequest: () => this.setState({\n        photoIndex: (this.state.photoIndex + 1) % this.state.photos.length\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 25\n      }\n    })));\n  }\n\n} //export default reduxForm({ form: formName })(GetPhotos);\n\n\nconst mapStateToProps = state => {\n  return {\n    photos: state.photos,\n    //  predictions: state.predictions,\n    photosFound: state.photosFound,\n    photosHasError: state.photosHasError,\n    photosIsLoading: state.photosIsLoading\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchData: url => store.dispatch(photosSearch(url))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GetPhotos); //export default GetPhotos;","map":{"version":3,"sources":["/Users/Shared/www/continuum/continuum/src/components/Core.js"],"names":["React","Component","connect","photosSearch","photosClear","store","DatePicker","Lightbox","GoogleMapGeoPicker","InfiniteScroll","MyAuth","waitForElement","googleMapApiKey","defaultPosition","latitude","longitude","GetPhotos","constructor","props","_isMounted","_loadModel","getPredictions","id","url","width","height","img","Image","crossOrigin","src","sleep","predictions","state","model","classify","console","log","newone","setState","busy","onLocationChange","location","handleLatitudeChange","event","Number","target","value","handleLongitudeChange","showForm","photoIndex","photos","offset","isOpen","startDate","Date","getFullYear","getMonth","endDate","radius","advancedOptions","searchPanel","photosFound","photosIsLoading","photosHasError","handleRadiusChange","bind","componentDidMount","ms","Promise","resolve","setTimeout","checkContent","i","item","size","sizes","componentDidUpdate","handleChangeStartDate","date","handleChangeEndDate","setRadius","r","setDate","now","combineParams","params","document","querySelector","start_time","Math","floor","getTime","end_time","lat","long","sort","count","v","getData","length","dispatch","getMoreData","toggleOptions","toggleSearchPanel","render","window","VK","Api","imagesList","map","index","owner_id","pred","className","probability","day","setHours","week","getDate","month","year","mapStateToProps","mapDispatchToProps","fetchData"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { photosSearch, photosClear } from './actions/photos';\nimport { store } from '../index';\nimport './Core.css';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\"\nimport Lightbox from 'react-image-lightbox';\nimport 'react-image-lightbox/style.css'; \nimport GoogleMapGeoPicker from 'react-geo-picker/lib/google-map';\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport MyAuth from './MyAuth';\nimport { waitForElement } from '@testing-library/react';\n\n//import * as nsfwjs from 'nsfwjs'\n//import VK, { Auth } from \"react-vk\";\n//import { reduxForm, Field } from 'redux-form';\n//import LocationPicker from 'react-location-picker';\n//import MapboxGeoPicker from 'react-geo-picker/lib/mapbox';\n//import createGoogleMapGeoPicker from 'react-geo-picker/lib/forms/redux-form/createGoogleMapGeoPicker';\n//import MapboxGeoPicker from 'react-geo-picker/lib/mapbox';\n\n\n\n//const GoogleMapGeoPicker = createGoogleMapGeoPicker({ formName });\nconst googleMapApiKey = 'AIzaSyAfcp4NLIW115eDyTYeEMpPIEQBI4RXrgs';\n\nconst defaultPosition = {\n    latitude: 51.625712,\n    longitude: 39.080306\n};\n\nclass GetPhotos extends Component {\n    _isMounted = false;\n    constructor(props) {\n        super(props);\n        this.state = {\n            showForm: true,\n            photoIndex: 0,\n            photos:[],\n            offset:0,\n            isOpen: false,\n            startDate: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\n            endDate: new Date(),\n            location: defaultPosition,\n            radius:800,\n            advancedOptions:false,\n            searchPanel:true,\n            photosFound: 0,\n            predictions:[],\n            model:null,\n            busy:false,\n            photosIsLoading:false,\n            photosHasError:false\n        }    \n        this.handleRadiusChange = this.handleRadiusChange.bind(this);\n    }\n\n    componentDidMount() {\n      //  this._loadModel()\n    }\n    \n    _loadModel = () => {\n        // Load model from public folder\n     //   nsfwjs.load('/model/', {size:299}).then(model => {\n       //   this.setState({\n         //   model,\n        //  })\n       // })\n    }\n\n    sleep(ms) {\n        return new Promise(resolve => setTimeout(resolve, ms))\n    }\n\n    getPredictions = async (id,url, width, height) => {\n //       let r='img_'+id;\n //       let myImg=this.refs.r;\n        const img = new Image();\n        img.width=width;\n        img.height=height;\n        img.crossOrigin = 'anonymous';\n        img.src =url;\n        \n        await this.sleep(100);\n        const predictions = await this.state.model.classify(img);\n        console.log('^^^^pred^^^^^');\n        console.log('id: ',id,'  url',img.src);\n        console.log(predictions);\n        let newone=this.state.predictions;\n        newone[id]=predictions;\n        this.setState({\n            predictions:newone,\n            busy:false\n        });\n\n    }\n\n    checkContent() {\n        return\n        let i=0;\n        let item=this.props.photos[i];\n        while (item && this.state.predictions[item.id] && !this.state.busy) {\n            i++;\n            item=this.props.photos[i];\n        }\n\n        console.log(i);\n        console.log(item);\n        if (item) console.log(this.state.predictions[item.id]);\n        \n        console.log(this.state.busy);\n        console.log(this.props.photos);\n\n        if (item && !this.state.predictions[item.id] && !this.state.busy) {\n            this.setState({\n                busy:true\n            });\n            console.log('got busy');\n            let size=3;\n\n            this.getPredictions(item.id,item.sizes[size].url,item.sizes[size].width,item.sizes[size].height);\n        }\n        \n    }\n\n    componentDidUpdate() {\n        if (!this.state.busy) {\n            this.checkContent();\n        }\n    }\n\n    handleChangeStartDate(date) {\n        this.setState({\n          startDate: date\n        });\n    };\n\n    handleChangeEndDate(date) {\n        this.setState({\n          endDate: date\n        });\n    };\n\n    onLocationChange = (location) => this.setState({\n        location: {\n          ...this.state.location,\n          ...location,\n        }\n    });\n\n    handleLatitudeChange = (event) => this.onLocationChange({\n        latitude: Number(event.target.value),\n    });\n    \n    handleLongitudeChange = (event) => this.onLocationChange({\n        longitude: Number(event.target.value),\n    });\n\n    handleRadiusChange(event) {\n        this.setState({radius: Number(event.target.value)})\n    };\n\n    setRadius(r) {\n        this.setState({\n            radius:r\n        })\n    }\n\n    setDate(date) {\n        this.setState({\n            startDate: date\n          });\n        let now=new Date();\n        this.setState({\n            endDate: now\n        });\n    }\n\n    \n    combineParams() {\n        let params={};\n        if (document.querySelector('#radius') && document.querySelector('#radius').value ) { params.radius=document.querySelector('#radius').value}\n        params.start_time=Math.floor(this.state.startDate.getTime()/1000);\n        params.end_time=Math.floor(this.state.endDate.getTime()/1000);\n        params.lat=this.state.location.latitude;\n        params.long=this.state.location.longitude;\n        params.radius=this.state.radius;\n        params.sort=1;\n        params.count=100;\n        params.offset=0;\n        params.v=5.103;\n\n        return params;\n    }\n    \n    getData() {\n        this.setState({offset:0});\n\n        if (this.state.photos && this.state.photos.length>0) {\n            console.log('*****clear*****');\n            store.dispatch(photosClear);\n        }\n\n        let params=this.combineParams();\n        store.dispatch(photosSearch(params));\n    }\n\n    getMoreData() {\n        let params=this.combineParams();\n\n        this.setState({offset:this.state.offset+100});\n        params.offset=this.state.offset;\n        store.dispatch(photosSearch(params));\n        \n    }\n\n    toggleOptions() {\n        if (!this.state.searchPanel) {\n            this.toggleSearchPanel()\n        }\n        this.setState({\n            advancedOptions: !this.state.advancedOptions\n        })\n    }\n\n    toggleSearchPanel() {\n        this.setState({\n            searchPanel: !this.state.searchPanel\n        })\n    }\n\n    render () {\n        if (window.VK===null && window.VK==='undefined' && !window.VK.Api) {\n            return (\n                {MyAuth}\n            )\n        }\n        if ( this.state.photosIsLoading && !this.state.photosHasError) {\n            return (<p className=\"labelBig\">Loading</p>)\n        }\n        if ( this.state.photosHasError) {\n            return (<p className=\"labelBig\">Error</p>)\n        }\n\n        let imagesList='';\n        if (this.state.photos && this.state.photos.length>0) {\n                imagesList=(<div className=\"imgContainer\">\n                <p className=\"labelBig\">Found {this.state.photosFound} images</p>\n                {this.state.photos.map((item, index) => (\n                    <div className=\"center-cropped\" key={index}>\n                        { item.owner_id>0 &&\n                            <a className=\"vkLink\" href={'https://vk.com/id'+item.owner_id} target='blank'>VK</a>\n                        }\n\n                        { this.state.predictions[item.id] &&\n                                <div className=\"predContainer\">\n                                { this.state.predictions[item.id].map((pred) => (                                        \n                                        <div className=\"pred\" key={item.id+'_'+pred.className} style={{width: pred.probability*100+'%'}}><p>{pred.className}</p></div>\n                                ))}\n                                </div>\n                        }\n                        <img ref={'img_'+item.id} src={item.sizes[1].url} onClick={() => this.setState({ isOpen: true, photoIndex:index})} width={item.sizes[1].width} height={item.sizes[1].height} className=\"imgTile\" alt=\"\" />\n                    </div>\n                ))}\n                </div>)\n        }\n\n        const { isOpen } = this.state.isOpen;\n        const { location } = this.state;\n        const day = new Date(new Date().setHours(0, 0, 0, 0));\n        const week = new Date();\n        week.setDate(week.getDate() - 7)\n        week.setHours(0,0,0,0);\n        const month = new Date(new Date().getFullYear(), new Date().getMonth(), 1);\n        const year = new Date(new Date().getFullYear(), 0, 1);\n        return (    \n            <div className=\"coreApp\">\n                <p className={ (this.state.photosIsLoading===true) ? \"spinner\":\"hidden\"}>loading..</p>\n\n                <div className=\"formInputToggle\" onClick={()=>this.toggleSearchPanel()}><span role=\"img\">&#128269;</span><p>Search<br/>panel</p></div>\n                <div className=\"formInputToggle\" onClick={()=>this.toggleOptions()}><span role=\"img\">&#9881;</span><p>Advanced<br/>options</p></div>\n\n                <div className={\"inputPanel \"+(this.state.searchPanel ? '':'hidden')}>\n                    <div className={\"formInput \"+(this.state.advancedOptions ? '':'hidden')}>\n                        <div className=\"input-control\">\n                            <p className='label'>Latitude:</p>\n                            <input\n                                className=\"input1\"\n                                type=\"number\"\n                                step=\"0.0000001\"\n                                min={-90}\n                                max={90}\n                                value={location.latitude}\n                                onChange={this.handleLatitudeChange}\n                            />\n                        </div>\n                        <div className=\"input-control\">\n                            <p className='label'>Latitude:</p>\n                            <input\n                                className=\"input1\"\n                                type=\"number\"\n                                step={0.0000001}\n                                min={-180}\n                                max={180}\n                                value={location.longitude}\n                                onChange={this.handleLongitudeChange}\n                            />\n                        </div>\n                        <div className=\"input-control\">\n                            <p className=\"label\">Distance (m)</p>\n                            <input id=\"radius\" className=\"input1\" type=\"number\" disabled placeholder=\"radius\" onChange={this.handleRadiusChange} value={this.state.radius}></input>\n                        </div>\n                        <hr />\n                        <p className=\"label\">From date</p>\n                        <DatePicker\n                            className=\"input1\"\n                            selected={this.state.startDate}\n                            onChange={date => this.handleChangeStartDate(date)}\n                            showTimeSelect\n                            timeFormat=\"HH:mm\"\n                            timeIntervals={30}\n                            timeCaption=\"time\"\n                            dateFormat=\"MMM d, yyyy HH:mm\"\n                        />\n                        <p className=\"label\">To date</p>\n                        <DatePicker\n                            className=\"input1\"\n                            selected={this.state.endDate}\n                            onChange={date => this.handleChangeEndDate(date)}\n                            showTimeSelect\n                            timeFormat=\"HH:mm\"\n                            timeIntervals={30}\n                            timeCaption=\"time\"\n                            dateFormat=\"MMM d, yyyy HH:mm\"\n                        />\n                    </div>\n                    <div className=\"formMap\">\n                        <GoogleMapGeoPicker apiKey={googleMapApiKey} value={location} width='100%' onChange={this.onLocationChange} />\n                    </div>\n                    <div className=\"formSelect\">\n                        <hr />\n                        <p className=\"label\">Period</p>\n                        <button className={\"select1 \"+(this.state.startDate.getTime()===day.getTime() ? 'selected':'')} onClick={()=>this.setDate(day)}>Day</button>\n                        <button className={\"select1 \"+(this.state.startDate.getTime()==week.getTime() ? 'selected':'')} onClick={()=>this.setDate(week)}>Week</button>\n                        <button className={\"select1 \"+(this.state.startDate.getTime()===month.getTime() ? 'selected':'')} onClick={()=>this.setDate(month)}>Month</button>\n                        <button className={\"select1 \"+(this.state.startDate.getTime()===year.getTime() ? 'selected':'')} onClick={()=>this.setDate(year)}>Year</button>\n                        <hr />\n                        <p className=\"label\">Distance</p>\n                        <button className={\"select1 \"+(this.state.radius===100 ? 'selected':'')} onClick={()=>this.setRadius(100)}>100 m</button>\n                        <button className={\"select1 \"+(this.state.radius===800 ? 'selected':'')} onClick={()=>this.setRadius(800)}>800 m</button>\n                        <button className={\"select1 \"+(this.state.radius===6000 ? 'selected':'')} onClick={()=>this.setRadius(6000)}>6 km</button>\n                        <button className={\"select1 \"+(this.state.radius===50000 ? 'selected':'')} onClick={()=>this.setRadius(50000)}>50 km</button>\n                    </div>\n                    <div className=\"formSelect\">\n                        <button className=\"input1\" onClick={()=>this.getData()}>Find</button>\n                    </div>\n                </div>\n                <div className=\"imagesList\">\n                    <InfiniteScroll\n                    dataLength={this.state.photos.length}\n                    next={()=>this.getMoreData()}\n                    hasMore={this.state.offset<=900}\n//                    loader={<p className=\"labelBig\">Loading...</p>}\n                    >\n                        {imagesList}\n                    </InfiniteScroll>\n\n                    {isOpen && (\n                        <Lightbox\n                            imageTitle={ this.state.photos[this.state.photoIndex].owner_id>0 ? (<a className=\"vkLink vkLinkLightbox\" href={'https://vk.com/id'+this.state.photos[this.state.photoIndex].owner_id} target='blank'>VK</a>):''}\n                            mainSrc={ this.state.photos[this.state.photoIndex].sizes[ this.state.photos[this.state.photoIndex].sizes.length-1].url}\n                            nextSrc={ this.state.photos[(this.state.photoIndex + 1) % this.state.photos.length].sizes[ this.state.photos[(this.state.photoIndex + 1) % this.state.photos.length].sizes.length-1].url}\n                            prevSrc={ this.state.photos[(this.state.photoIndex + this.state.photos.length - 1) % this.state.photos.length].sizes[ this.state.photos[(this.state.photoIndex + this.state.photos.length - 1) % this.state.photos.length].sizes.length-1].url}\n                            onCloseRequest={() => this.setState({ isOpen: false })}\n                            onMovePrevRequest={() =>\n                            this.setState({\n                                photoIndex: (this.state.photoIndex + this.state.photos.length - 1) % this.state.photos.length,\n                            })\n                            }\n                            onMoveNextRequest={() =>\n                            this.setState({\n                                photoIndex: (this.state.photoIndex + 1) % this.state.photos.length,\n                            })\n                            }\n                        />\n                    )}\n            </div>\n        </div>\n        )\n    }\n}\n\n//export default reduxForm({ form: formName })(GetPhotos);\n\n\nconst mapStateToProps = (state) => {\n    return {\n        photos: state.photos,\n      //  predictions: state.predictions,\n        photosFound: state.photosFound,\n        photosHasError: state.photosHasError,\n        photosIsLoading: state.photosIsLoading,\n    };\n};\n\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        fetchData: (url) => store.dispatch(photosSearch(url))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GetPhotos);\n//export default GetPhotos;"]},"metadata":{},"sourceType":"module"}